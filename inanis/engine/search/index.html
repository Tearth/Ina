<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="API documentation for the Rust `search` mod in crate `inanis`."><title>inanis::engine::search - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/SourceSerif4-Regular-46f98efaafac5295.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2"><link rel="stylesheet" href="../../../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../../../static.files/rustdoc-5bc39a1768837dd0.css"><meta name="rustdoc-vars" data-root-path="../../../" data-static-root-path="../../../static.files/" data-current-crate="inanis" data-themes="" data-resource-suffix="" data-rustdoc-version="1.77.2 (25ef9e3d8 2024-04-09)" data-channel="1.77.2" data-search-js="search-dd67cee4cfa65049.js" data-settings-js="settings-4313503d2e1961c2.js" ><script src="../../../static.files/storage-4c98445ec4002617.js"></script><script defer src="../sidebar-items.js"></script><script defer src="../../../static.files/main-48f368f3872407c8.js"></script><noscript><link rel="stylesheet" href="../../../static.files/noscript-04d5337699b92874.css"></noscript><link rel="alternate icon" type="image/png" href="../../../static.files/favicon-16x16-8b506e7a72182f1c.png"><link rel="alternate icon" type="image/png" href="../../../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../../../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../../../inanis/index.html">inanis</a><span class="version">1.3.0</span></h2></div><h2 class="location"><a href="#">Module search</a></h2><div class="sidebar-elems"><section><ul class="block"><li><a href="#enums">Enums</a></li><li><a href="#constants">Constants</a></li><li><a href="#functions">Functions</a></li></ul></section><h2><a href="../index.html">In inanis::engine</a></h2></div></nav><div class="sidebar-resizer"></div>
    <main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><div id="sidebar-button" tabindex="-1"><a href="../../../inanis/all.html" title="show sidebar"></a></div><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Click or press â€˜Sâ€™ to search, â€˜?â€™ for more optionsâ€¦" type="search"><div id="help-button" tabindex="-1"><a href="../../../help.html" title="help">?</a></div><div id="settings-menu" tabindex="-1"><a href="../../../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../../../static.files/wheel-7b819b6101059cd0.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1>Module <a href="../../index.html">inanis</a>::<wbr><a href="../index.html">engine</a>::<wbr><a class="mod" href="#">search</a><button id="copy-path" title="Copy item path to clipboard"><img src="../../../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="src" href="../../../src/inanis/engine/search.rs.html#1-860">source</a> Â· <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><h2 id="enums" class="section-header">Enums<a href="#enums" class="anchor">Â§</a></h2><ul class="item-table"><li><div class="item-name"><a class="enum" href="enum.MoveGeneratorStage.html" title="enum inanis::engine::search::MoveGeneratorStage">MoveGeneratorStage</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </div></li></ul><h2 id="constants" class="section-header">Constants<a href="#constants" class="anchor">Â§</a></h2><ul class="item-table"><li><div class="item-name"><a class="constant" href="constant.LAZY_SMP_NOISE.html" title="constant inanis::engine::search::LAZY_SMP_NOISE">LAZY_SMP_NOISE</a></div></li><li><div class="item-name"><a class="constant" href="constant.MOVE_ORDERING_BISHOP_PROMOTION.html" title="constant inanis::engine::search::MOVE_ORDERING_BISHOP_PROMOTION">MOVE_ORDERING_BISHOP_PROMOTION</a></div></li><li><div class="item-name"><a class="constant" href="constant.MOVE_ORDERING_CASTLING.html" title="constant inanis::engine::search::MOVE_ORDERING_CASTLING">MOVE_ORDERING_CASTLING</a></div></li><li><div class="item-name"><a class="constant" href="constant.MOVE_ORDERING_HASH_MOVE.html" title="constant inanis::engine::search::MOVE_ORDERING_HASH_MOVE">MOVE_ORDERING_HASH_MOVE</a></div></li><li><div class="item-name"><a class="constant" href="constant.MOVE_ORDERING_HISTORY_MOVE.html" title="constant inanis::engine::search::MOVE_ORDERING_HISTORY_MOVE">MOVE_ORDERING_HISTORY_MOVE</a></div></li><li><div class="item-name"><a class="constant" href="constant.MOVE_ORDERING_HISTORY_MOVE_OFFSET.html" title="constant inanis::engine::search::MOVE_ORDERING_HISTORY_MOVE_OFFSET">MOVE_ORDERING_HISTORY_MOVE_OFFSET</a></div></li><li><div class="item-name"><a class="constant" href="constant.MOVE_ORDERING_KILLER_MOVE_1.html" title="constant inanis::engine::search::MOVE_ORDERING_KILLER_MOVE_1">MOVE_ORDERING_KILLER_MOVE_1</a></div></li><li><div class="item-name"><a class="constant" href="constant.MOVE_ORDERING_KILLER_MOVE_2.html" title="constant inanis::engine::search::MOVE_ORDERING_KILLER_MOVE_2">MOVE_ORDERING_KILLER_MOVE_2</a></div></li><li><div class="item-name"><a class="constant" href="constant.MOVE_ORDERING_KNIGHT_PROMOTION.html" title="constant inanis::engine::search::MOVE_ORDERING_KNIGHT_PROMOTION">MOVE_ORDERING_KNIGHT_PROMOTION</a></div></li><li><div class="item-name"><a class="constant" href="constant.MOVE_ORDERING_LOSING_CAPTURES_OFFSET.html" title="constant inanis::engine::search::MOVE_ORDERING_LOSING_CAPTURES_OFFSET">MOVE_ORDERING_LOSING_CAPTURES_OFFSET</a></div></li><li><div class="item-name"><a class="constant" href="constant.MOVE_ORDERING_QUEEN_PROMOTION.html" title="constant inanis::engine::search::MOVE_ORDERING_QUEEN_PROMOTION">MOVE_ORDERING_QUEEN_PROMOTION</a></div></li><li><div class="item-name"><a class="constant" href="constant.MOVE_ORDERING_ROOK_PROMOTION.html" title="constant inanis::engine::search::MOVE_ORDERING_ROOK_PROMOTION">MOVE_ORDERING_ROOK_PROMOTION</a></div></li><li><div class="item-name"><a class="constant" href="constant.MOVE_ORDERING_WINNING_CAPTURES_OFFSET.html" title="constant inanis::engine::search::MOVE_ORDERING_WINNING_CAPTURES_OFFSET">MOVE_ORDERING_WINNING_CAPTURES_OFFSET</a></div></li></ul><h2 id="functions" class="section-header">Functions<a href="#functions" class="anchor">Â§</a></h2><ul class="item-table"><li><div class="item-name"><a class="fn" href="fn.assign_capture_scores.html" title="fn inanis::engine::search::assign_capture_scores">assign_capture_scores</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </div><div class="desc docblock-short">Assigns capture scores for <code>moves</code> by filling <code>move_scores</code> array with <code>moves_count</code> length (starting from <code>start_index</code>), based on current <code>context</code>.
If transposition table move is available, itâ€™s passed as <code>tt_move</code> too. Moves are prioritized as follows (from most important to the less ones):</div></li><li><div class="item-name"><a class="fn" href="fn.assign_quiet_scores.html" title="fn inanis::engine::search::assign_quiet_scores">assign_quiet_scores</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </div><div class="desc docblock-short">Assigns quiet scores for <code>moves</code> by filling <code>move_scores</code> array with <code>moves_count</code> length (starting from <code>start_index</code>), based on current <code>context</code>.
If transposition table move is available, itâ€™s passed as <code>tt_move</code> too. Moves are prioritized as follows (from most important to the less ones):</div></li><li><div class="item-name"><a class="fn" href="fn.get_next_move.html" title="fn inanis::engine::search::get_next_move">get_next_move</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </div><div class="desc docblock-short">Gets a next move to analyze. This function acts as pseudo-iterator and takes care about managing move generator stages, which is basically
a state machine (<a href="https://en.wikipedia.org/wiki/Finite-state_machine">https://en.wikipedia.org/wiki/Finite-state_machine</a>) with following rules:</div></li><li><div class="item-name"><a class="fn" href="fn.iir_can_be_applied.html" title="fn inanis::engine::search::iir_can_be_applied">iir_can_be_applied</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </div><div class="desc docblock-short">The main idea of the internal iterative reduction is that nodes without hash moves are potentially less important, so we
try to save time here by reducing depth a little bit. This is not always true, but some inaccuracies should be recompensated by deeper search.</div></li><li><div class="item-name"><a class="fn" href="fn.iir_get_r.html" title="fn inanis::engine::search::iir_get_r">iir_get_r</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </div><div class="desc docblock-short">Gets the internal iterative depth reduction, called R, based on <code>depth</code>. The further from the horizon we are, the more reduction will be applied.</div></li><li><div class="item-name"><a class="fn" href="fn.lmp_can_be_applied.html" title="fn inanis::engine::search::lmp_can_be_applied">lmp_can_be_applied</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </div><div class="desc docblock-short">The main idea of the late move pruning is to prune all nodes, which are near the horizon and were scored low by the history table.
We assume here, that thereâ€™s a little chance that move being near the end of the list will improve score, so thereâ€™s no point of spending time here.</div></li><li><div class="item-name"><a class="fn" href="fn.lmr_can_be_applied.html" title="fn inanis::engine::search::lmr_can_be_applied">lmr_can_be_applied</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </div><div class="desc docblock-short">The main idea of the late move reduction is to reduce search depth of all quiet moves, which arenâ€™t promising and with high chance wonâ€™t improve score.
This is the least risky type of pruning (used inside PVS framework which cares about re-search when the move is better than expected),
so itâ€™s also applied in PV nodes.</div></li><li><div class="item-name"><a class="fn" href="fn.lmr_get_r.html" title="fn inanis::engine::search::lmr_get_r">lmr_get_r</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </div><div class="desc docblock-short">Gets the late move depth reduction, called R, based on <code>move_index</code>. The lower the move was scored, the larger reduction will be returned.</div></li><li><div class="item-name"><a class="fn" href="fn.nmp_can_be_applied.html" title="fn inanis::engine::search::nmp_can_be_applied">nmp_can_be_applied</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </div><div class="desc docblock-short">The main idea of the null move pruning is to prune all nodes, for which the search gives us score above beta even if we skip a move (which allows
the opposite color to make two of them in a row). This is based on the null move observation, which says that thereâ€™s always a better alternative than
doing nothing (except zugzwang).</div></li><li><div class="item-name"><a class="fn" href="fn.nmp_get_r.html" title="fn inanis::engine::search::nmp_get_r">nmp_get_r</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </div><div class="desc docblock-short">Gets the null move pruning depth reduction, called R, based on <code>depth</code>. The further from the horizon we are, the more reduction will be applied.</div></li><li><div class="item-name"><a class="fn" href="fn.razoring_can_be_applied.html" title="fn inanis::engine::search::razoring_can_be_applied">razoring_can_be_applied</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </div><div class="desc docblock-short">The main idea of the razoring is to detect and prune all nodes, which (based on lazy evaluation) are hopeless compared to the current alpha and
the chance to improve the score is too small to spend time here. To make it more safe and not to skip positions where weâ€™re somewhere in the
middle of capture sequence, thereâ€™s the quiescence search performed to verify if the final score is still below alpha - margin.</div></li><li><div class="item-name"><a class="fn" href="fn.razoring_get_margin.html" title="fn inanis::engine::search::razoring_get_margin">razoring_get_margin</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </div><div class="desc docblock-short">Gets the razoring margin, based on <code>depth</code>. The further from the horizon we are, the more margin we should take to determine if node can be pruned.</div></li><li><div class="item-name"><a class="fn" href="fn.run.html" title="fn inanis::engine::search::run">run</a></div><div class="desc docblock-short">Wrapper for the entry point of the regular search, look at <code>run_internal</code> for more information.</div></li><li><div class="item-name"><a class="fn" href="fn.run_internal.html" title="fn inanis::engine::search::run_internal">run_internal</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </div><div class="desc docblock-short">Entry point of the regular search, with generic <code>ROOT</code> parameter indicating if this is the root node where the moves filterigh might happen, and <code>PV</code> parameter
determining if the current node is a PV (principal variation) node in the PVS framework. The implementation contains a typical alpha-beta approach, together with
a bunch of reductions and prunings to optimize search. The most important parameter here, <code>context</code>, contains the current state of the search, board state,
statistics, and is passed by reference to all nodes. Besides obvious parameters like <code>depth</code>, <code>ply</code>, <code>alpha</code> and <code>beta</code>, thereâ€™s also <code>allow_null_move</code>
which prevents two null move checks in a row, and <code>friendly_king_checked</code> which is used to share friendly king check status between nodes (itâ€™s always
calculated one depth earlier, as itâ€™s used as one of the LMR constraints). If <code>DIAG</code> is set to true, additional statistics will be gathered (with a small
performance penalty).</div></li><li><div class="item-name"><a class="fn" href="fn.snmp_can_be_applied.html" title="fn inanis::engine::search::snmp_can_be_applied">snmp_can_be_applied</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </div><div class="desc docblock-short">The main idea of the static null move pruning (also called as reverse futility pruning) is to prune all nodes, which (based on lazy evaluation) are too
good compared to the current beta, and will very likely be a cut-node. To save time, we skip move loop entirely and return beta + some margin score.
The concept is very similar to null move pruning, but without performing any search.</div></li><li><div class="item-name"><a class="fn" href="fn.snmp_get_margin.html" title="fn inanis::engine::search::snmp_get_margin">snmp_get_margin</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </div><div class="desc docblock-short">Gets the static null move pruning margin, based on <code>depth</code>. The further from the horizon we are, the more margin should we take to determine
if node can be pruned.</div></li></ul></section></div></main></body></html>